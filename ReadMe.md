# ✨ 한정판 스니커즈 입찰 거래 Re커머스 ✨

하나 사 ~ 원하는 가격에 살 수 있잖아 ~
<br>
#### 패션의 완성은 **운동화** !

<img width="1000" alt="image" src="https://github.com/user-attachments/assets/33b68706-0d4c-4700-8d3d-af15fad8cf13">

### 팀 브로셔 🖌️
[바로가기](https://teamsparta.notion.site/11-ReVibe-a065dc8b9ba44f669ae8d9778d6a8830)

## 📑 서비스 소개
- **서비스 명** : 한정판 스니커즈의 ReSELL + E-Commerce 플랫폼
- **서비스 설명** :
  - 스니커즈 문화가 단순한 패션을 넘어 하나의 투자 자산이자 라이프 스타일로 자리 잡고 있습니다.
  - 보통 중고 시장은 신상품보다 저렴하게 사고파는 것이 일반적인 상식인데, 리셀 시장에서의 정가 구매는 어렵고, 가격 변동은 예측하기 어렵습니다.
  - 우리는 이러한 문제를 해결하기 위해 공정하고 투명한 입찰 거래 플랫폼을 제공합니다.

**<입찰 거래 시스템 도입>**
- ReVibe에서는 구매자 혹은 판매자로서 참여할 수 있습니다. 
- ReVibe에서는 판매자의 원하는 가격에, 구매자의 원하는 가격에 거래가 안정적으로 이루어집니다.

**<주요 사용자>**
- 남들과 다른 신발을 신거나 수집하고자 하는 구매자 
- 한정판 제품을 정가에 구매한 후 비싸게 되파는 리셀러

## 📑 핵심 기능

| 기능            | 설명                                        |
|---------------|-------------------------------------------|
| 일반 / 소셜 로그인   | 사용자는 일반 또는 카카오 소셜 로그인을 한다.                |
| 브랜드와 상품 등록    | 관리자는 상품의 세부 사항(브랜드, 상품, 옵션 등)을 등록한다.      |
| 판매 입찰         | 판매자는 원하는 상품의 옵션을 선택하여 판매 입찰을 등록한다.        |
| 구매 입찰         | 구매자는 상품에 대해 원하는 가격 또는 즉시 구매 입찰을 신청할 수 있다. |
| 체결 시스템        | 입찰 시 구매 입찰과 판매 입찰의 가격이 일치할 경우 성립된다.       |
| 좋아요           | 로그인한 사용자는 특정 상품을 관심 목록에 추가할 수 있다.         |
| 결제 시스템        | 포인트와 쿠폰 사용으로 상품 결제가 가능하다.                 |
| 리뷰            | 글 리뷰는 100 point, 포토 리뷰는 500 point 각각 지급된다 |
| 선착순 쿠폰 발급     | 관리자가 발행한 쿠폰을 사용자들이 1인당 1개씩 발급 받을 수 있다.    |
| 1대1 실시간 채팅    | 이메일로 상대방을 초대하여 실시간으로 대화한다.                |


## **Contributors**
<table align="center">
<table align="center">
  <tr>
    <td align="center">Backend</td>
    <td align="center">Backend</td>
    <td align="center">Backend</td>
    <td align="center">Backend</td>
  </tr>
  <tr>
    <td>
      <a href="https://github.com/minsang-dev">
        <img src="https://github.com/user-attachments/assets/8338cc34-4a90-4c18-94cd-6ed6a0c54530" width="150" style="max-width: 100%;">
      </a>
    </td>
    <td>
      <a href="https://github.com/2unmini">
        <img src="https://github.com/user-attachments/assets/622d9c10-66d7-41f0-8860-e0b64a119172" width="150" style="max-width: 100%;">
      </a>
    </td>
    <td>
      <a href="https://github.com/Dirtbagss">
        <img src="https://github.com/user-attachments/assets/42bb4f92-6d35-4648-b0cb-c8bc3dc53c96" width="150" style="max-width: 100%;">
      </a>
    </td>
    <td>
      <a href="https://github.com/hyojunpy">
        <img src="https://github.com/user-attachments/assets/1896cdd5-7fa7-4de9-817b-5edd1edc3260" width="150" style="max-width: 100%;">
      </a>
    </td>
  <tr>
  <tr>
    <td align="center">
      <a href="https://github.com/minsang-dev">👑 리더 김민상</a>
    </td>
    <td align="center">
      <a href="https://github.com/2unmini">👑 부리더 천준민</a>
    </td>
    <td align="center">
      <a href="https://github.com/Dirtbagss">👑 조원 이창현</a>
    </td>
    <td align="center">
      <a href="https://github.com/hyojunpy">👑 조원 편효준</a>
    </td>
  </tr>
</table>

# Backend Tech Stack

| 구분            | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Back-end      | <img src="https://img.shields.io/badge/Java17-000000?style=for-the-badge&logo=java&color=F40D12"> <img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=Spring&logoColor=white"/> <img src="https://img.shields.io/badge/Spring_Boot_3-0?style=for-the-badge&logo=spring-boot&logoColor=white&color=%236DB33F"> <img src="https://img.shields.io/badge/Spring Security-6DB33F?style=for-the-badge&logo=Spring Security&logoColor=white"/> <img src="https://img.shields.io/badge/Hibernate-0?style=for-the-badge&logo=hibernate&logoColor=white&color=%2359666C"> <img src="https://img.shields.io/badge/apache tomcat-F8DC75?style=for-the-badge&logo=apachetomcat&logoColor=white">                                                                                            |
| Data & Server | <img src="https://img.shields.io/badge/MySQL_8-0?style=for-the-badge&logo=mysql&logoColor=white&color=4479A1"> <img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white">  <img src="https://img.shields.io/badge/Amazon RDS-0?style=for-the-badge&logo=amazonrds&logoColor=white&color=527FFF"> <img src="https://img.shields.io/badge/Amazon_EC2-0?style=for-the-badge&logo=amazon-ec2&logoColor=white&color=%23FF9900"> <img src="https://img.shields.io/badge/Amazon%20S3-FF9900?style=for-the-badge&logo=amazons3&logoColor=white">                                                                                                                                                                                                                       |
| Library & API | <img src="https://img.shields.io/badge/Jwt-000000?style=for-the-badge&logo=JSONWebTokens&logoColor=white"> <img src="https://img.shields.io/badge/OAuth2-0?style=for-the-badge&logo=auth0&logoColor=white&color=%23000000">                                                                                                                                                                                                                                                                                                                                               |
| IDE           | <img src="https://img.shields.io/badge/IntelliJIDEA-000000.svg?style=for-the-badge&logo=intellij-idea&logoColor=white">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Etc           | <img src="https://img.shields.io/badge/AWS-232F3E?style=for-the-badge&logo=amazonwebservices&logoColor=white"> <img src="https://img.shields.io/badge/GitHub%20Actions-0?style=for-the-badge&logo=GitHub%20Actions&logoColor=white&color=%232088FF"> <img src="https://img.shields.io/badge/Docker-0?style=for-the-badge&logo=docker&logoColor=white&color=2496ED"> <img src="https://img.shields.io/badge/Gradle-0?style=for-the-badge&logo=gradle&logoColor=white&color=%2302303A"> <img src="https://img.shields.io/badge/JUnit-25A162?style=for-the-badge&logo=JUnit5&logoColor=white"> <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white"/> <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=slack&logoColor=white"> |

# **소프트웨어 아키텍처**
![image](https://github.com/user-attachments/assets/46647e46-2552-4bbc-aa36-c97ec2482879)

# **📜 트러블 슈팅**
- **문제1**
  - WebConfig에서의 접근 권한 설정은 제대로 되었지만 delegateDeniedHandler에서 security filter가 ExceptionHandler를 잡지 못하는 문제 발생 
  - 해결 방안 : handleAccessDeniedException 메서드를 추가하고, AccessDenied 메세지를 반환하여 exceptionhandler를 잡을 수 있었음
- **문제2**
  - 쿠폰 발급 서비스 코드에 분산락을 적용하였는데도 동시성 제어를 수행하지 못하고, 무한대기에 걸리는 문제 발생
  - 해결 방안 : AopForTransaction 클래스의 AOP를 통해 트랜잭션이 커밋된 후 락이 해제되도록 처리해주었음
- **문제3**
  - Websocket을 활용한 STOMP 채팅 기능과 프론트단을 구현하면서 Cors 오류 발생
  - 해결 방안 : CorsCongig 클래스를 생성하여 HTTP 요청에 대한 cors 정책을 명확하게 설정해줌
- **문제4**
  - 사용자 증가에 따른 좋아요 요청 빈도수가 높아지면 SQL 실행이 매번 발생하여 성능 저하를 초래하는 문제 발생
  - 해결 방안 : Redis의 Set 자료 구조를 활용하여 사용자의 좋아요 상태를 캐싱하고, Redis에서 먼저 조회하는 순서로 MySQL 접근을 최소화하여 Redis에 데이터가 없을 경우에만 MySQL에서 조회 후 Redis에 저장하도록 함
- **문제5**
  - 기존 코드 findAll() 사용하여 아이템 목록 조회 시 조회된 각 Item 객체에서 User 와 Brand 정보를 참조할 때, 지연 로딩(Lazy Loading) 으로 인해 추가적인 SQL 쿼리가 발생
  - 해결 방안 : fetchJoin()을 사용하여 한 번의 쿼리로 item, user, brand 데이터를 모두 가져오므로써, 불필요한 추가 조회 쿼리가 사라지고 성능 향상됨
- **문제6**
  - docker image는 생성 되었으나 dock run 명령어를 실행했을 때 docker contatiner 생성이 안되는 문제 발생
  - 해결 방안 : 로컬에서 실행할 때 .env 안에 있는 모든 값들이 -e key=value로 존재해야하지만 docker container를 생성하고 실행할 수 있었음

# **📜 기술적인 의사결정**
[바로가기](https://github.com/Double-Owner/ReVibe/wiki/%EA%B8%B0%EC%88%A0%EC%A0%81-%EC%9D%98%EC%82%AC%EA%B2%B0%EC%A0%95)

# **📜 서비스 플로우**
![Image](https://github.com/user-attachments/assets/2a88380b-632a-40bd-9d0e-650648c5c302)

# **📜 ERD 설계도**
![image](https://github.com/user-attachments/assets/bbfa7b63-5495-45cb-97bb-83008f7e105a)


## **📑 프로젝트 구조**

```plaintext
📦 ReVibe
├── 📂 src
│   ├── 📂 main
│   │   ├── 📂 java
│   │   │   ├── 📂 domain   
│   │   │   │   ├── 📂 account
│   │   │   │   ├── 📂 brand
│   │   │   │   ├── 📂 buybid
│   │   │   │   ├── 📂 cart 
│   │   │   │   ├── 📂 chat
│   │   │   │   ├── 📂 coupon
│   │   │   │   ├── 📂 execution
│   │   │   │   ├── 📂 item
│   │   │   │   ├── 📂 like
│   │   │   │   ├── 📂 option
│   │   │   │   ├── 📂 payment
│   │   │   │   ├── 📂 point
│   │   │   │   ├── 📂 review
│   │   │   │   ├── 📂 sellbid
│   │   │   │   └── 📂 user
│   │   │   └── 📂 global    # 공통 코드 (ex. aop, common, config, filter)    
|   |   |
│   └── 📂 test
├── 📄 .gitignore
├── 📄 Dockerfile
└── 📄 README.md
```

## **📑 팀 노션**

[팀 프로젝트 관련 진행사항](https://www.notion.so/teamsparta/Double-One-2bc9087bd17d44fd83ca9cb807e345cf)
